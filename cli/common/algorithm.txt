ParameterValues parameters = new ParameterValues();
Parser parser = new Parser(args);
while (parser.hasRemaining()) {
	Collection<ParameterScheme> newSchemes = getParameterSchemes(parameters);

	// If there are no new schemes pending processing, then this is as far as we
	// can go and we need to decide what to do about the unrecognized stuff
	if (newSchemes.isEmpty()) break;

	// This should explode if any of the parameter specifications from the new schemes
	// are identical to the ones from the old schemes
	ParseResult result = parser.parse(newSchemes);
	ParameterValues newParams = result.getParameterValues();
	if (newParams != null) {
		parameters.addValues(newParams);
	}
}

if (parser.hasRemaining()) {
	// We have remaining parameters that we were unable to identify...
	// ...check to see if they're just words (i.e. positionals), or
	// if they're actual flags (-x or --something).  If there are
	// flags positioned before the first instance of "--", then this
	// is an error and must be reported as such
} else {
	// All parameters were consumed, so we're nice and happy
}